import{a as k,C as h,V as c,p as F,B as N,l as T,f as R,b as q,c as U,d as M,e as O,F as V}from"./vendor.f001ab96.js";const A=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}};A();const p=k.create({headers:{"Content-Type":"application/json"}});async function I(){return(await p.get("/api/version")).data}async function B(e,o){return(await p.post("/api/run",{amod:e,goal:o})).data}async function P(){return(await p.get("/api/examples/list")).data}async function W(e){return(await p.get("/api/examples/"+e)).data}var m={getExample:W,getExampleList:P,getVersion:I,run:B};h.defineMode("amod",function(){const e=/^={2}(model|config|init|productions)={2}/,o=/[?][a-zA-Z0-9_]*/,t={authors:!0,chunks:!0,clear:!0,description:!0,do:!0,examples:!0,gactar:!0,match:!0,modules:!0,name:!0,print:!0,recall:!0,set:!0,to:!0,write:!0},n={goal:!0,imaginal:!0,memory:!0,nil:!0,"!nil":!0,retrieval:!0};function r(i,l){let a=i.next();for(;!i.eol()&&a!=l.pending;)a=i.next();return"string"}function s(i,l){const a=i.next();if(a=="/"&&i.eat("/"))return i.skipToEnd(),"comment";if(a==="[")return l.startPattern=!0,"bracket";if(a==="]"||a==="{"||a==="}")return"bracket";if(a=="'"||a=='"')return l.pending=a,r(i,l);if(a==="?"&&(i.backUp(1),i.match(o)))return"variable";if(a==="="){if(i.backUp(1),i.match(e))return"header";i.next()}i.eatWhile(/[\w-]/);const d=i.current();return d in t?"keyword":d in n?"built-in":l.startPattern?(l.startPattern=!1,"chunk-name"):null}return{startState:function(){return{pending:"",startPattern:!1}},token:function(i,l){return i.eatSpace()?null:s(i,l)}}});h.defineMIME("text/amod","gactar");var j=c.extend({props:{amodCode:{type:String,default(){return"(code here)"}},mode:{type:String,required:!0},readOnly:{type:Boolean,default:!1},framework:{type:String,required:!0}},data(){return{editor:null,id:"id-"+this.framework,code:this.amodCode}},mounted(){const e=document.getElementById(this.id),o=h.fromTextArea(e,{lineNumbers:!0,mode:this.mode,theme:"amod",autoCloseBrackets:!0,autoRefresh:!0,matchBrackets:!0,readOnly:this.readOnly,styleActiveLine:!0});o.on("change",()=>{this.onCodeChange(o)}),this.editor=o},watch:{amodCode(e){this.editor&&this.editor.setValue(e)}},methods:{onCodeChange(e){e&&e.getValue().length!=0&&this.$emit("editorCodeChange",e.getValue())}}}),z=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{id:e.id},domProps:{value:e.code},on:{input:function(n){n.target.composing||(e.code=n.target.value)}}})])},D=[];function f(e,o,t,n,r,s,i,l){var a=typeof e=="function"?e.options:e;o&&(a.render=o,a.staticRenderFns=t,a._compiled=!0),n&&(a.functional=!0),s&&(a._scopeId="data-v-"+s);var d;if(i?(d=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(u=__VUE_SSR_CONTEXT__),r&&r.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(i)},a._ssrRegister=d):r&&(d=l?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(a.functional){a._injectStyles=d;var L=a.render;a.render=function(S,_){return d.call(_),L(S,_)}}else{var v=a.beforeCreate;a.beforeCreate=v?[].concat(v,d):[d]}return{exports:e,options:a}}const g={};var X=f(j,z,D,!1,G,null,null,null);function G(e){for(let o in g)this[o]=g[o]}var $=function(){return X.exports}(),H=c.extend({props:{code:{type:String,required:!0},defaultName:{type:String,required:!0},fileExtension:{type:String,required:!0}},methods:{saveCode(){var e=new Blob([this.code],{type:"text/plain;charset=utf-8"}),o=document.createElement("a");o.download=this.defaultName+"."+this.fileExtension,o.innerHTML="Save File",window.webkitURL!=null?o.href=window.webkitURL.createObjectURL(e):(o.href=window.URL.createObjectURL(e),o.style.display="none",o.onclick=t=>{document.body.removeChild(t.target)},document.body.appendChild(o)),o.click()}}}),K=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-button",{attrs:{type:"is-info is-light ml-2"},on:{click:e.saveCode}},[t("span",{staticClass:"fa fa-file-download icon-space"}),e._v("Save ")])},Z=[];const b={};var J=f(H,K,Z,!1,Q,null,null,null);function Q(e){for(let o in b)this[o]=b[o]}var E=function(){return J.exports}();const w="gactar-code-editor";var Y=c.extend({components:{CodeMirror:$,SaveButton:E},data(){return{amodCode:"",exampleFiles:[],fileToLoad:null,loadedFromLocal:!1,count:0}},watch:{amodCode(){this.$emit("codeChange",this.amodCode)},fileToLoad(e){var o=new FileReader;o.onload=t=>{t.target!=null&&typeof t.target.result=="string"&&(this.amodCode=t.target.result)},o.readAsText(e)}},created(){window.addEventListener("beforeunload",()=>{this.beforeWindowUnload()}),window.addEventListener("load",()=>{this.onWindowLoad()})},beforeDestroy(){window.removeEventListener("load",()=>{this.onWindowLoad()}),window.removeEventListener("beforeunload",()=>{this.beforeWindowUnload()})},async mounted(){await this.getExamples(),this.loadedFromLocal||await this.getExample(this.exampleFiles[0])},methods:{beforeWindowUnload(){localStorage.setItem(w,this.amodCode)},editorCodeChange(e){this.$emit("codeChange",e)},async getExample(e){await m.getExample(e).then(o=>{this.count+=1,this.amodCode=o}).catch(o=>{this.$emit("showError",o)})},async getExamples(){await m.getExampleList().then(e=>{this.exampleFiles=e.example_list}).catch(e=>{this.$emit("showError",e)})},onWindowLoad(){var e=localStorage.getItem(w);e!==null&&(this.loadedFromLocal=!0,this.amodCode=e)}}}),ee=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-tab-item",{attrs:{label:"amod"}},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("b-field",{staticClass:"is-pulled-right",attrs:{grouped:""}},[t("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(n){return[t("b-button",{attrs:{label:"Load Example",type:"is-info is-light","icon-right":"caret-square-down"}})]}}])},e._l(e.exampleFiles,function(n){return t("b-dropdown-item",{key:n,attrs:{value:n,"aria-role":"listitem",focusable:!1},on:{click:function(r){return e.getExample(n)}}},[e._v(" "+e._s(n)+" ")])}),1),t("save-button",{attrs:{code:e.amodCode,"default-name":"model","file-extension":"amod"}}),t("b-field",{staticClass:"file"},[t("b-button",{attrs:{type:"upload is-info is-light is-outlined ml-2"}},[t("span",{staticClass:"fa fa-file-upload icon-space"}),t("b-upload",{attrs:{accept:".amod,text/plain"},model:{value:e.fileToLoad,callback:function(n){e.fileToLoad=n},expression:"fileToLoad"}},[e._v(" Load ")])],1)],1)],1)],1)]),t("code-mirror",{key:e.count,ref:"code-editor",attrs:{"amod-code":e.amodCode,mode:"amod",framework:"amod"},on:{editorCodeChange:e.editorCodeChange}})],1)},te=[];const y={};var oe=f(Y,ee,te,!1,ne,null,null,null);function ne(e){for(let o in y)this[o]=y[o]}var re=function(){return oe.exports}(),ae=c.extend({components:{CodeMirror:$,SaveButton:E},props:{code:{type:String,required:!0},mode:{type:String,required:!0},fileExtension:{type:String,required:!0},framework:{type:String,required:!0},modelName:{type:String,required:!0}},data(){return{fileToLoad:null,accept:"."+this.mode+",text/plain",refName:"code-editor-"+this.mode,count:0}},computed:{defaultFileName(){return this.framework+"_"+this.modelName}},watch:{code(){this.count+=1}}}),ie=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-tab-item",{staticClass:"code-tab",attrs:{label:e.framework}},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("strong",[e._v(e._s(e.defaultFileName)+"."+e._s(e.fileExtension))]),e._v(" (generated code) "),t("b-field",{staticClass:"is-pulled-right"},[t("save-button",{attrs:{code:e.code,"default-name":e.defaultFileName,"file-extension":e.fileExtension}})],1)],1)]),t("code-mirror",{key:e.count,ref:e.refName,attrs:{"amod-code":e.code,mode:e.mode,framework:e.framework,"read-only":!0}})],1)},se=[];const C={};var le=f(ae,ie,se,!1,de,null,null,null);function de(e){for(let o in C)this[o]=C[o]}var ce=function(){return le.exports}(),ue=c.extend({components:{AmodCodeTab:re,CodeTab:ce},data(){return{activeTab:0,baseTabs:[{id:"ccm",mode:"python",fileExtension:"py",modelName:"",displayed:!1},{id:"pyactr",mode:"python",fileExtension:"py",modelName:"",displayed:!1},{id:"vanilla",mode:"commonlisp",fileExtension:"lisp",modelName:"",displayed:!1}],code:{},goal:"",running:!1,results:"",version:""}},computed:{tabs(){return this.baseTabs}},mounted(){this.loadVersion()},methods:{codeChange(e){this.code.amod=e},run(){this.running=!0,m.run(this.code.amod,this.goal).then(e=>{"results"in e?this.setResults(e.results):this.showError(e.error)}).catch(e=>{this.showError(e.message)})},loadVersion(){m.getVersion().then(e=>{this.version=e.version}).catch(e=>{this.showError(e.message)})},setResults(e){let o="";for(const[t,n]of Object.entries(e)){o+=t+`
---
`,o+=n.output,o+=`

`,this.code[t]=n.code;const r=this.tabs.findIndex(s=>s.id==t);r!=-1&&(this.tabs[r].modelName=n.modelName,n.code.length!=0&&(this.tabs[r].displayed=!0))}this.results=o,this.running=!1},showError(e){this.results=e,this.running=!1}}}),fe=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("span",[t("h1",[t("img",{attrs:{src:"/images/gactar-logo.svg"}}),e._v(" gactar-web "),e.version?t("span",{staticClass:"version-number"},[e._v(" \xA0("),t("a",{attrs:{href:"https://github.com/asmaloney/gactar",target:"_"}},[e._v(e._s(e.version))]),e._v(" ) ")]):e._e()]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-three-fifths code-column"},[t("b-tabs",{staticClass:"custom",attrs:{animated:!1,expanded:"",type:"is-boxed"},model:{value:e.activeTab,callback:function(n){e.activeTab=n},expression:"activeTab"}},[t("amod-code-tab",{on:{codeChange:e.codeChange,showError:e.showError}}),e._l(e.tabs,function(n){return[n.displayed?t("code-tab",{key:n.id,attrs:{value:n.id,framework:n.id,mode:n.mode,"file-extension":n.fileExtension,"model-name":n.modelName,code:e.code[n.id]}}):e._e()]})],2)],1),t("div",{staticClass:"column"},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Goal","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"(initial goal here)",expanded:""},model:{value:e.goal,callback:function(n){e.goal=n},expression:"goal"}}),t("p",{staticClass:"control"},[t("b-button",{staticClass:"button is-info",attrs:{loading:e.running},on:{click:e.run}},[t("span",{staticClass:"fa fa-running icon-space"}),e._v("Run ")])],1)],1)],1)]),t("div",{staticClass:"columns result"},[t("div",{staticClass:"column"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.results,expression:"results"}],attrs:{id:"results"},domProps:{value:e.results},on:{input:function(n){n.target.composing||(e.results=n.target.value)}}})])])])])])},me=[];const x={};var pe=f(ue,fe,me,!1,he,null,null,null);function he(e){for(let o in x)this[o]=x[o]}var ve=function(){return pe.exports}();c.use(F,k);c.use(N,{defaultIconPack:"far"});T.add(R,q,U,M);O.watch();c.component("FontAwesomeIcon",V);c.config.productionTip=!1;new c({render:e=>e(ve)}).$mount("#app");
