import{C as m,V as c,p as E,a as L,B as S,l as N,f as F,b as T,c as R,d as q,e as U,F as M}from"./vendor.50529bff.js";const O=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}};O();m.defineMode("amod",function(){const e=/^={2}(model|config|init|productions)={2}/,o=/[?][a-zA-Z0-9_]*/,t={authors:!0,chunks:!0,clear:!0,description:!0,do:!0,examples:!0,gactar:!0,match:!0,modules:!0,name:!0,print:!0,recall:!0,set:!0,to:!0,write:!0},r={goal:!0,imaginal:!0,memory:!0,nil:!0,"!nil":!0,retrieval:!0};function n(i,l){for(var a=i.next();!i.eol()&&a!=l.pending;)a=i.next();return"string"}function s(i,l){var a=i.next();if(a=="/"&&i.eat("/"))return i.skipToEnd(),"comment";if(a==="[")return l.startPattern=!0,"bracket";if(a==="]"||a==="{"||a==="}")return"bracket";if(a=="'"||a=='"')return l.pending=a,n(i,l);if(a==="?"&&(i.backUp(1),i.match(o)))return"variable";if(a==="="){if(i.backUp(1),i.match(e))return"header";i.next()}i.eatWhile(/[\w-]/);var d=i.current();if(d in t)return"keyword";if(d in r)return"built-in";if(l.startPattern)return l.startPattern=!1,"chunk-name"}return{startState:function(){return{pending:"",startPattern:!1}},token:function(i,l){return i.eatSpace()?null:s(i,l)}}});m.defineMIME("text/amod","gactar");var A=c.extend({props:{amodCode:{type:String,default(){return"(code here)"}},mode:{type:String,required:!0},readOnly:{type:Boolean,default:!1},framework:{type:String,required:!0}},data(){return{editor:null,id:"id-"+this.framework,code:this.amodCode}},mounted(){const e=document.getElementById(this.id);this.editor=m.fromTextArea(e,{lineNumbers:!0,mode:this.mode,theme:"amod",autoCloseBrackets:!0,autoRefresh:!0,matchBrackets:!0,readOnly:this.readOnly,styleActiveLine:!0}),this.editor.on("change",this.onCmCodeChange)},methods:{onCmCodeChange(){this.editor.getValue().length!=0&&this.$emit("update:amodCode",this.editor.getValue())},setCode(e){this.editor.setValue(e)}}}),I=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{id:e.id},domProps:{value:e.code},on:{input:function(r){r.target.composing||(e.code=r.target.value)}}})])},B=[];function f(e,o,t,r,n,s,i,l){var a=typeof e=="function"?e.options:e;o&&(a.render=o,a.staticRenderFns=t,a._compiled=!0),r&&(a.functional=!0),s&&(a._scopeId="data-v-"+s);var d;if(i?(d=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(u=__VUE_SSR_CONTEXT__),n&&n.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(i)},a._ssrRegister=d):n&&(d=l?function(){n.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:n),d)if(a.functional){a._injectStyles=d;var $=a.render;a.render=function(k,h){return d.call(h),$(k,h)}}else{var p=a.beforeCreate;a.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:a}}const v={};var P=f(A,I,B,!1,V,null,null,null);function V(e){for(let o in v)this[o]=v[o]}var _=function(){return P.exports}(),W=c.extend({props:{code:{type:String,required:!0},defaultName:{type:String,required:!0},fileExtension:{type:String,required:!0}},methods:{saveCode(){var e=new Blob([this.code],{type:"text/plain;charset=utf-8"}),o=document.createElement("a");o.download=this.defaultName+"."+this.fileExtension,o.innerHTML="Save File",window.webkitURL!=null?o.href=window.webkitURL.createObjectURL(e):(o.href=window.URL.createObjectURL(e),o.style.display="none",o.onclick=t=>{document.body.removeChild(t.target)},document.body.appendChild(o)),o.click()}}}),j=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-button",{attrs:{type:"is-info is-light ml-2"},on:{click:e.saveCode}},[t("span",{staticClass:"fa fa-file-download icon-space"}),e._v("Save ")])},z=[];const g={};var D=f(W,j,z,!1,X,null,null,null);function X(e){for(let o in g)this[o]=g[o]}var b=function(){return D.exports}();const y="gactar-code-editor";var G=c.extend({components:{CodeMirror:_,SaveButton:b},data(){return{amodCode:"",exampleFiles:[],fileToLoad:null,loadedFromLocal:!1,count:0}},watch:{amodCode(){this.$emit("codeChange",this.amodCode)},fileToLoad(e){if(e!=null){var o=new FileReader;o.onload=t=>{this.$refs["code-editor"].setCode(t.target.result)},o.readAsText(this.fileToLoad)}}},created(){window.addEventListener("beforeunload",this.beforeWindowUnload),window.addEventListener("load",this.onWindowLoad)},beforeDestroy(){window.removeEventListener("load",this.onWindowLoad),window.removeEventListener("beforeunload",this.beforeWindowUnload)},async mounted(){await this.getExamples(),this.loadedFromLocal||this.getExample(this.exampleFiles[0])},methods:{beforeWindowUnload(){localStorage.setItem(y,this.amodCode)},async getExample(e){try{const{data:o}=await this.$http.get("/api/examples/"+e);this.count+=1,this.amodCode=o}catch(o){this.$emit("showError",o)}},async getExamples(){try{const{data:e}=await this.$http.get("/api/examples/list");this.exampleFiles=e.example_list}catch(e){this.$emit("showError",e)}},onWindowLoad(){var e=localStorage.getItem(y);e!==null&&(this.loadedFromLocal=!0,this.$refs["code-editor"].setCode(e))}}}),H=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-tab-item",{attrs:{label:"amod"}},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("b-field",{staticClass:"is-pulled-right",attrs:{grouped:""}},[t("b-dropdown",{attrs:{"aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(r){return[t("b-button",{attrs:{label:"Load Example",type:"is-info is-light","icon-right":"caret-square-down"}})]}}])},e._l(e.exampleFiles,function(r){return t("b-dropdown-item",{key:r,attrs:{value:r,"aria-role":"listitem",focusable:!1},on:{click:function(n){return e.getExample(r)}}},[e._v(" "+e._s(r)+" ")])}),1),t("save-button",{attrs:{code:e.amodCode,"default-name":"model","file-extension":"amod"}}),t("b-field",{staticClass:"file"},[t("b-button",{attrs:{type:"upload is-info is-light is-outlined ml-2"}},[t("span",{staticClass:"fa fa-file-upload icon-space"}),t("b-upload",{attrs:{accept:".amod,text/plain"},model:{value:e.fileToLoad,callback:function(r){e.fileToLoad=r},expression:"fileToLoad"}},[e._v(" Load ")])],1)],1)],1)],1)]),t("code-mirror",{key:e.count,ref:"code-editor",attrs:{"amod-code":e.amodCode,mode:"amod",framework:"amod"},on:{"update:amodCode":function(r){e.amodCode=r},"update:amod-code":function(r){e.amodCode=r}}})],1)},K=[];const w={};var Z=f(G,H,K,!1,J,null,null,null);function J(e){for(let o in w)this[o]=w[o]}var Q=function(){return Z.exports}(),Y=c.extend({components:{CodeMirror:_,SaveButton:b},props:{code:{type:String,required:!0},mode:{type:String,required:!0},fileExtension:{type:String,required:!0},framework:{type:String,required:!0},modelName:{type:String,required:!0}},data(){return{fileToLoad:null,accept:"."+this.mode+",text/plain",refName:"code-editor-"+this.mode,count:0}},computed:{defaultFileName(){return this.framework+"_"+this.modelName}},watch:{code(){this.count+=1,this.$refs[this.refName].setCode(this.code)}}}),ee=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("b-tab-item",{staticClass:"code-tab",attrs:{label:e.framework}},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("strong",[e._v(e._s(e.defaultFileName)+"."+e._s(e.fileExtension))]),e._v(" (generated code) "),t("b-field",{staticClass:"is-pulled-right"},[t("save-button",{attrs:{code:e.code,"default-name":e.defaultFileName,"file-extension":e.fileExtension}})],1)],1)]),t("code-mirror",{key:e.count,ref:e.refName,attrs:{"amod-code":e.code,mode:e.mode,framework:e.framework,"read-only":!0},on:{"update:amodCode":function(r){e.code=r},"update:amod-code":function(r){e.code=r}}})],1)},te=[];const C={};var oe=f(Y,ee,te,!1,re,null,null,null);function re(e){for(let o in C)this[o]=C[o]}var ne=function(){return oe.exports}(),ae=c.extend({components:{AmodCodeTab:Q,CodeTab:ne},data(){return{activeTab:0,baseTabs:[{id:"ccm",mode:"python",fileExtension:"py",modelName:"",displayed:!1},{id:"pyactr",mode:"python",fileExtension:"py",modelName:"",displayed:!1},{id:"vanilla",mode:"commonlisp",fileExtension:"lisp",modelName:"",displayed:!1}],code:{},goal:"",running:!1,results:"",version:null}},computed:{tabs(){return this.baseTabs}},async mounted(){this.version=this.loadVersion()},methods:{codeChange(e){this.code.amod=e},async run(){this.running=!0;try{const{data:e}=await this.$http.post("/api/run",{amod:this.code.amod,goal:this.goal});if(e.error){this.showError(e.error);return}this.setResults(e.results)}catch(e){this.showError(e)}},async loadVersion(){try{const{data:e}=await this.$http.get("/api/version");this.version=e.version}catch(e){this.showError(e)}},setResults(e){let o="";for(const[t,r]of Object.entries(e)){o+=t+`
---
`,o+=r.output,o+=`

`,this.code[t]=r.code;const n=this.tabs.findIndex(s=>s.id==t);n!=-1&&(this.tabs[n].modelName=r.modelName,r.code.length!=0&&(this.tabs[n].displayed=!0))}this.results=o,this.running=!1},showError(e){this.results=e,this.running=!1}}}),ie=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("span",[t("h1",[t("img",{attrs:{src:"/images/gactar-logo.svg"}}),e._v(" gactar-web "),e.version?t("span",{staticClass:"version-number"},[e._v(" \xA0("),t("a",{attrs:{href:"https://github.com/asmaloney/gactar",target:"_"}},[e._v(e._s(e.version))]),e._v(" ) ")]):e._e()]),t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-three-fifths code-column"},[t("b-tabs",{staticClass:"custom",attrs:{animated:!1,expanded:"",type:"is-boxed"},model:{value:e.activeTab,callback:function(r){e.activeTab=r},expression:"activeTab"}},[t("amod-code-tab",{on:{codeChange:e.codeChange,showError:e.showError}}),e._l(e.tabs,function(r){return[r.displayed?t("code-tab",{key:r.id,attrs:{value:r.id,framework:r.id,mode:r.mode,"file-extension":r.fileExtension,"model-name":r.modelName,code:e.code[r.id]}}):e._e()]})],2)],1),t("div",{staticClass:"column"},[t("div",{staticClass:"columns buttons"},[t("div",{staticClass:"column"},[t("b-field",{attrs:{label:"Goal","label-position":"on-border"}},[t("b-input",{attrs:{placeholder:"(initial goal here)",expanded:""},model:{value:e.goal,callback:function(r){e.goal=r},expression:"goal"}}),t("p",{staticClass:"control"},[t("b-button",{staticClass:"button is-info",attrs:{loading:e.running},on:{click:e.run}},[t("span",{staticClass:"fa fa-running icon-space"}),e._v("Run ")])],1)],1)],1)]),t("div",{staticClass:"columns result"},[t("div",{staticClass:"column"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.results,expression:"results"}],attrs:{id:"results"},domProps:{value:e.results},on:{input:function(r){r.target.composing||(e.results=r.target.value)}}})])])])])])},se=[];const x={};var le=f(ae,ie,se,!1,de,null,null,null);function de(e){for(let o in x)this[o]=x[o]}var ce=function(){return le.exports}();c.use(E,L);c.use(S,{defaultIconPack:"far"});N.add(F,T,R,q);U.watch();c.component("FontAwesomeIcon",M);c.config.productionTip=!1;new c({render:e=>e(ce)}).$mount("#app");
